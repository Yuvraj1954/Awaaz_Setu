<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AwaazSetu | Activity Logs</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        .history-table { width: 100%; border-collapse: collapse; margin-top: 2rem; background: var(--glass); border-radius: 16px; overflow: hidden; backdrop-filter: blur(20px); }
        .history-table th, .history-table td { padding: 1.2rem; text-align: left; border-bottom: 1px solid var(--border); }
        .history-table th { background: rgba(255,255,255,0.05); color: var(--primary); text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; }
        .pagination { margin: 2rem 0; display: flex; gap: 15px; justify-content: center; align-items: center; }
        .page-btn { background: var(--glass); border: 1px solid var(--border); color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer; transition: 0.3s; font-weight: 600; }
        .page-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .page-btn:hover:not(:disabled) { background: var(--primary); }
        
        /* FIXED: Centered Sidebar Elements */
        .sidebar-center-nav { display: flex; flex-direction: column; align-items: center; gap: 15px; width: 100%; }
        .clear-btn { background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.2); padding: 10px 20px; border-radius: 12px; cursor: pointer; font-weight: 700; transition: 0.3s; width: 85%; }
        .clear-btn:hover { background: #ef4444; color: white; }
    </style>
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
            <div class="side-logo-container"><i class="fas fa-satellite-dish"></i></div>
            <div class="sidebar-center-nav">
                <button class="nav-btn" style="width: 85%; justify-content: center;" onclick="window.location.href='index.html'"><i class="fas fa-home"></i> <span>Back Home</span></button>
                <button class="clear-btn" onclick="clearLogs()"><i class="fas fa-trash"></i> Clear Logs</button>
            </div>
        </aside>
        <main class="main-content">
            <header class="top-bar">
                <div class="brand-container"><h1 class="glow-text">History Logs</h1></div>
            </header>
            <div style="max-width: 900px; margin: 0 auto; width: 100%; padding: 20px;">
                <table class="history-table">
                    <thead><tr><th>Time</th><th>Query Snippet</th><th>Lang</th></tr></thead>
                    <tbody id="history-body"></tbody>
                </table>
                <div class="pagination">
                    <button id="prev-btn" class="page-btn">Previous</button>
                    <span id="page-num" style="font-weight: 800;">Page 1</span>
                    <button id="next-btn" class="page-btn">Next</button>
                </div>
            </div>
        </main>
    </div>
    <script>
        let currentPage = 1;
        const itemsPerPage = 10;
        let fullHistory = JSON.parse(localStorage.getItem('awaazSetu_FullHistory') || '[]');

        function renderPage(page) {
            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const items = fullHistory.slice(start, end);
            const tbody = document.getElementById('history-body');
            tbody.innerHTML = items.length === 0 ? "<tr><td colspan='3' style='text-align:center; opacity:0.5;'>No logs found</td></tr>" : items.map(i => `<tr><td>${i.time}</td><td>${i.text}</td><td>${i.lang.toUpperCase()}</td></tr>`).join('');
            document.getElementById('page-num').textContent = `Page ${page}`;
            document.getElementById('prev-btn').disabled = page === 1;
            document.getElementById('next-btn').disabled = end >= fullHistory.length;
        }

        function clearLogs() { if(confirm("Wipe all query history?")) { localStorage.removeItem('awaazSetu_FullHistory'); fullHistory = []; renderPage(1); } }
        document.getElementById('prev-btn').onclick = () => { if(currentPage > 1) renderPage(--currentPage); };
        document.getElementById('next-btn').onclick = () => { if(currentPage * itemsPerPage < fullHistory.length) renderPage(++currentPage); };
        renderPage(1);
    </script>
</body>
</html>
